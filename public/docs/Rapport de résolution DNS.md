# Rapport de r√©solution ‚Äî Probl√®me DNS partiel sous Kali Linux

## Contexte
* **Syst√®me :** Kali Linux
* **Gestion r√©seau :** NetworkManager
* **Connexion :** Wi-Fi

**Sympt√¥mes :**
* Connexion Internet fonctionnelle
* Certains services accessibles (YouTube, WhatsApp Web, ChatGPT)
* D‚Äôautres services inaccessibles ou tr√®s lents :
    * GitHub
    * Canva
    * Google AI Studio
    * Render

**Messages fr√©quents :**
* ¬´ Pas de connexion ¬ª
* Chargement infini
* Timeouts DNS

## Diagnostic initial
**V√©rification du DNS syst√®me**

Commande :
```bash
cat /etc/resolv.conf
```

R√©sultat observ√© :
```text
# Generated by NetworkManager
nameserver 192.168.100.1
```

## Analyse
Le DNS utilis√© est celui :
* du routeur
* ou du FAI

Ce DNS est partiellement fonctionnel :
* R√©sout les domaines grand public (YouTube, WhatsApp)
* √âchoue sur les domaines techniques et internationaux

Probl√®me fr√©quent chez certains FAI, notamment avec :
* GitHub
* Services Google avanc√©s
* Plateformes de d√©ploiement cloud

üëâ **Conclusion :** probl√®me de r√©solution DNS, pas de connexion Internet

## Identification de la bonne connexion r√©seau
Commande :
```bash
nmcli con show
```

Connexions actives (en vert) :
* `Genuis Dream` ‚Üí Wi-Fi (connexion Internet r√©elle)
* `lo` ‚Üí loopback (√† ignorer)
* `docker0` ‚Üí bridge Docker (√† ignorer)

üëâ **Seule la connexion `Genuis Dream` doit √™tre modifi√©e**

## Solution appliqu√©e

### Objectifs
1. Remplacer le DNS du FAI par un DNS fiable
2. Emp√™cher NetworkManager de r√©injecter le DNS automatique
3. √âviter les probl√®mes IPv6 mal support√©s par le FAI

### √âtape 1 ‚Äî Forcer un DNS fiable (Cloudflare)
Commandes :
```bash
nmcli con mod "Genuis Dream" ipv4.dns "1.1.1.1 1.0.0.1"
nmcli con mod "Genuis Dream" ipv4.ignore-auto-dns yes
```

**Raison**
* Cloudflare DNS : Rapide, Stable, Non filtr√©
* `ignore-auto-dns` emp√™che le routeur/FAI de reprendre la main

### √âtape 2 ‚Äî D√©sactiver IPv6 sur la connexion
Commande :
```bash
nmcli con mod "Genuis Dream" ipv6.method ignore
```

**Raison**
IPv6 souvent :
* mal impl√©ment√©
* mal rout√©
* mal r√©solu par les FAI

Provoque :
* timeouts silencieux
* faux √©tats ¬´ hors ligne ¬ª

### √âtape 3 ‚Äî Red√©marrage de la connexion
Commandes :
```bash
nmcli con down "Genuis Dream"
nmcli con up "Genuis Dream"
```

## V√©rification finale
**V√©rifier le DNS actif**

Commande :
```bash
cat /etc/resolv.conf
```

R√©sultat attendu :
```text
nameserver 1.1.1.1
nameserver 1.0.0.1
```
‚ùå Si `192.168.x.x` appara√Æt encore ‚Üí la configuration n‚Äôa pas √©t√© appliqu√©e correctement
‚úÖ Si Cloudflare appara√Æt ‚Üí DNS correctement forc√©

## Tests de validation
Sites test√©s avec succ√®s :
* https://github.com
* https://www.canva.com
* https://ai.google.dev
* https://render.com

**R√©sultat :**
* Chargement normal
* Plus de message ¬´ pas de connexion ¬ª
* Lenteur √©limin√©e

## Conclusion
Le probl√®me √©tait caus√© par :
* un DNS de routeur/FAI partiellement fonctionnel
* combin√© √† un IPv6 instable

La solution durable consiste √† :
1. forcer un DNS public fiable
2. neutraliser le DNS automatique
3. d√©sactiver IPv6 si le FAI ne le supporte pas correctement

**R√®gle √† retenir (Linux / Kali)**
> Connexion OK + certains sites inaccessibles
> = DNS ou IPv6, jamais la machine.

## Plan B (si le probl√®me r√©appara√Æt ailleurs)
* Activer DNS-over-HTTPS dans le navigateur
* Utiliser Cloudflare WARP ou un VPN l√©ger
* V√©rifier √† nouveau `/etc/resolv.conf`
